# Домашнее задание к занятию #13 - "Белая магия" Spring Data: Spring Data JPA

## Задача

Библиотеку на Spring Data JPA

**Цель**: максимально просто писать слой репозиториев с применением современных подходов
**Результат**: приложение со слоем репозиториев на Spring Data JPA

**Описание/Пошаговая инструкция выполнения домашнего задания:**

Домашнее задание выполняется переписыванием предыдущего на JPA.

1. Переписать все репозитории по работе с книгами на Spring Data JPA репозитории.
2. Используйте spring-boot-starter-data-jpa.
3. Кастомные методы репозиториев (или с хитрым @Query) покрыть тестами, используя H2.
4. @Transactional рекомендуется ставить на методы сервисов, а не репозиториев.

Это домашнее задание будет использоваться в качестве основы для других ДЗ
Данная работа не засчитывает предыдущую!

## Требования для сборки и выполнения

- Java 11 (JDK)

## Сборка

```shell
./gradlew build
```

## Запуск

```shell
java -jar ./build/libs/booklib-0.0.1-SNAPSHOT.jar
```

## Сборка дистрибутива

```shell
./gradlew installBootDist
```

Дистрибутив вы сможете найти в папке `build/install/booklib-boot`.

Скрипт запуска находится в папке bin дистрибутива: `build/install/booklib-boot/bin/`

Получить заархивированную версию дистрибутива можно одной из следующих команд:

```shell
./gradlew distTar
```

или

```shell
./gradlew distZip
```

## Доступные операции

После запуска, приложение перейдет в интерактивный режим и появится приглашение `shell:>`. 
Получить список доступных команд можно следующим образом:

```
shell:> help
```

**Команды управления библиотекой книг:**

| Команда                                   | Описание            |
|-------------------------------------------|---------------------|
| `n`, `create-book`                        | Создать книгу       |
| `d`, `del`, `delete-books`                | Удалить книгу       |
| `u`, `e`, `update`, `edit`, `update-book` | Редактировать книгу |
| `l`, `p`, `list`, `list-books`            | Вывести список книг |


**Управление комментариями к книгам:**

| Команда                         | Описание                     |
|---------------------------------|------------------------------|
| `nc`, `comment-book`            | Добавить комментарий к книге |
| `lc`, `pc`, `list-book-comment` | Список комментариев к книги  |
| `uc`, `ec`, `update-comment`    | Редактировать комментарий    |
| `dc`, `delete-comment`          | Удалить комментарий          |

# Домашнее задание к занятию #34 - Docker, оркестрация, облака, облачные хостинги

## Задача

Обернуть приложение в docker-контейнер

**Цель**: деплоить приложение в современном DevOps-стеке
**Результат**: обёртка приложения в Docker

**Описание/Пошаговая инструкция выполнения домашнего задания:**

Внимание! Задание выполняется на основе любого сделанного Web-приложения

1. Обернуть приложение в docker-контейнер. Dockerfile принято располагать в корне репозитория. В image должна попадать JAR-приложения. Сборка в контейнере рекомендуется, но не обязательна.
2. БД в собственный контейнер оборачивать не нужно (если только Вы не используете кастомные плагины)
3. Настроить связь между контейнерами, с помощью docker-compose
4. Опционально: сделать это в локальном кубе.
5. Приложение желательно реализовать с помощью всех Best Practices Docker (логгирование в stdout и т.д.)

Данное задание НЕ засчитывает предыдущие!

## Реализация

За основу взято приложение "Библиотека" MVC.

Сборка образа:

```shell
./gradlew jibDockerBuild
```

Запуск через docker compose:

```shell
docker compose up -d
```

После запуска приложение доступно по адресу http://localhost:8080

Остановка (с очисткой):

```shell
docker compose down -v
```

Запуск с "пересборкой" проекта в контейнере:

```shell
docker compose up --build -d
```

## Требования для сборки и выполнения

- Java 11 (JDK)
- Docker (для сборки образа)

## Сборка

```shell
./gradlew build
```

## Запуск

```shell
java -jar ./build/libs/booklib-0.0.1-SNAPSHOT.jar
```

## Сборка дистрибутива

```shell
./gradlew installBootDist
```

Дистрибутив вы сможете найти в папке `build/install/booklib-boot`.

Скрипт запуска находится в папке bin дистрибутива: `build/install/booklib-boot/bin/`

Получить заархивированную версию дистрибутива можно одной из следующих команд:

```shell
./gradlew distTar
```

или

```shell
./gradlew distZip
```

# Домашнее задание к занятию #4 - Конфигурирование Spring-приложений

## Задача

**Цель**: использовать возможности Spring Boot, чтобы разрабатывать современные приложения, так, как их сейчас и разрабатывают.
**Результат**: Production-ready приложение на Spring Boot

Описание/Пошаговая инструкция выполнения домашнего задания:

Это домашнее задание выполняется на основе предыдущего.

1. Создать проект, используя Spring Boot Initializr (https://start.spring.io)
2. Перенести приложение проведения опросов из прошлого домашнего задания.
3. Перенести все свойства в application.yml
4. Локализовать выводимые сообщения и вопросы (в CSV-файле). MesageSource должен быть из автоконфигурации Spring Boot.
5. Сделать собственный баннер для приложения.
6. Перенести тесты и использовать spring-boot-test-starter для тестирования

*Опционально:

- использовать ANSI-цвета для баннера.
- если Ваш язык отличается от русского и английского - локализовать в нём.

Коммитить wrapper или нет в репозиторий - решать Вам.
Задание сдаётся в виде ссылки на pull-request в чат с преподавателем.
Вопросы можно задавать в чате, но для оперативности рекомендуем Slack.
Написанное приложение будет использоваться в ДЗ №4 (к занятию №5).
Данное задание засчитывает ДЗ №1 (к занятию №1) и ДЗ №2 (к занятию №2).
Если Вы хотите засчитать, то обязательно пришлите ссылку в чат соответствующего предыдущего занятия.

## Имплементация

Вопросы Quiz необходимо разместить в файле в папке с ресурсами `src/main/resources` и указать путь к нему в файле 
настроек `application.yml`. Например:

```properties
quiz.questions.file=quiz/questions.csv
```

Вы также можете в файле `application.properties` указать долю (0..1) правильных ответов для того чтобы тест 
был признан успешным:

```properties
quiz.questions.correct-answers-ratio=0.75
```

Если ваш Quiz интернационализирован, то вы можете добавить файл перевода вопросов в `resourses/i18n` и установить
нужную локаль в файле `application.properties`:

```properties
quiz.questions.locale=ru_RU
```


### Формат файла Quiz

Для вопросов используется CSV файл, c разделителем `;` (точка с запятой).
Каждая строка содержит четыре колонки:

1. Тип вопроса - одно из значений: general,choice
2. Текст вопроса
3. Возможные варианты (только для вопросов типа choice). Возможные значения перечисляются через запятую.
4. Правильный ответ. Для вопросов с выбором значение это индекс(начало с нуля) правильного ответа в списке вариантов (п.3), а для общих вопросов непосредственно текст ответа

Например:

```csv
choice;сколько ног у осьминога;2,6,8,10;2
general;первый цвет радуги;;красный
```

### Требования для сборки

- Java 11 (JDK)
- Интернет

### Сборка/Запуск

### ThickJar

Для сборки ThickJar выполните команду:

```shell
./gradlew shadowJar
```

Для запуска приложения используйте следующую команду, находясь в корне проекта:

```shell
java -jar ./build/libs/quiz-1.0-SNAPSHOT-all.jar
```

### Сборка дистрибутива

Используйте следующую команду для сборки дистрибутива проекта:

```shell
./gradlew installShadowDist
```

В директории `./build/install/quiz-shadow/` вы найдете дистрибутив проекта.
Для запуска используйте скрипт `bin/quiz`.

Также вы можете собрать архив дистрибутива используя следующую команду:

```shell
./gradlew shadowDistZip
```

или

```shell
./gradlew shadowDistTar
```

В зависимости от того какой тип архива вам предпочтительнее Zip или Tar.

Соответствующие дистрибутивы, после сборки, вы найдете в директории `build/distributions`.


